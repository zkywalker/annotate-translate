<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Audio Feature - Annotate & Translate</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.8;
      padding: 40px 20px;
      max-width: 900px;
      margin: 0 auto;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }

    .container {
      background: white;
      border-radius: 16px;
      padding: 40px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
    }

    h1 {
      color: #667eea;
      font-size: 32px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    h2 {
      color: #5a67d8;
      font-size: 24px;
      margin-top: 40px;
      margin-bottom: 16px;
      padding-bottom: 8px;
      border-bottom: 2px solid #e0e7ff;
    }

    h3 {
      color: #764ba2;
      font-size: 18px;
      margin-top: 24px;
      margin-bottom: 12px;
    }

    .intro {
      background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 30px;
      border-left: 4px solid #667eea;
    }

    .intro p {
      color: #4a5568;
      font-size: 16px;
      line-height: 1.6;
    }

    .feature-box {
      background: #f7fafc;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      border-left: 4px solid #48bb78;
    }

    .feature-box h3 {
      color: #2d3748;
      margin-top: 0;
    }

    .test-section {
      background: #fff5f5;
      padding: 24px;
      border-radius: 8px;
      margin: 24px 0;
      border: 2px dashed #fc8181;
    }

    .test-words {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin: 16px 0;
    }

    .test-word {
      background: white;
      padding: 12px 20px;
      border-radius: 6px;
      font-size: 18px;
      font-weight: 600;
      color: #2d3748;
      cursor: pointer;
      user-select: text;
      transition: all 0.2s;
      border: 2px solid #e2e8f0;
    }

    .test-word:hover {
      background: #667eea;
      color: white;
      border-color: #667eea;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    .instructions {
      background: #fffaf0;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      border-left: 4px solid #f6ad55;
    }

    .instructions ol {
      margin-left: 24px;
      color: #744210;
    }

    .instructions li {
      margin: 8px 0;
    }

    .step-number {
      display: inline-block;
      width: 28px;
      height: 28px;
      background: #667eea;
      color: white;
      border-radius: 50%;
      text-align: center;
      line-height: 28px;
      font-weight: bold;
      margin-right: 8px;
    }

    .info-card {
      background: #ebf8ff;
      padding: 16px;
      border-radius: 6px;
      margin: 12px 0;
      border-left: 4px solid #4299e1;
    }

    .info-card p {
      color: #2c5282;
      margin: 4px 0;
    }

    code {
      background: #f7fafc;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      color: #e53e3e;
      font-size: 14px;
    }

    .emoji {
      font-size: 24px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }

    th, td {
      padding: 12px;
      text-align: left;
      border: 1px solid #e2e8f0;
    }

    th {
      background: #667eea;
      color: white;
      font-weight: 600;
    }

    tr:nth-child(even) {
      background: #f7fafc;
    }

    .example-annotation {
      font-size: 24px;
      margin: 20px 0;
      text-align: center;
      padding: 20px;
      background: white;
      border-radius: 8px;
      border: 2px solid #e2e8f0;
    }

    .sentence-examples {
      line-height: 2.5;
      font-size: 18px;
      padding: 20px;
      background: #f7fafc;
      border-radius: 8px;
      margin: 20px 0;
    }

    .sentence-examples p {
      margin: 16px 0;
    }

    .highlight {
      background: #fef5e7;
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: 600;
    }

    .success {
      color: #38a169;
    }

    .warning {
      color: #d69e2e;
    }

    .error {
      color: #e53e3e;
    }

    footer {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 2px solid #e2e8f0;
      text-align: center;
      color: #718096;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>
      <span class="emoji">üîä</span>
      Test Audio Feature
    </h1>

    <div class="intro">
      <p>
        <strong>Welcome!</strong> This page helps you test the new <strong>audio playback feature</strong> 
        in the Annotate & Translate extension. Select any word below, click the annotation button, 
        and then click the <span class="emoji">üîä</span> button to hear the pronunciation!
      </p>
    </div>

    <!-- Feature Overview -->
    <h2>üéØ Feature Overview</h2>
    
    <div class="feature-box">
      <h3>‚ú® What's New?</h3>
      <p>
        When you annotate a word, you'll now see a small <strong>speaker button üîä</strong> 
        next to the phonetic transcription. Click it to hear how the word is pronounced!
      </p>
    </div>

    <div class="info-card">
      <p><strong class="success">‚úì Smart Audio Source Selection</strong></p>
      <p>The extension automatically chooses the best audio source:</p>
      <ol>
        <li><strong>FreeDictionary API</strong> - High-quality native speaker recordings</li>
        <li><strong>Web Speech API</strong> - Browser text-to-speech (fallback)</li>
      </ol>
    </div>

    <!-- Expected Result -->
    <h2>üìñ Expected Result</h2>
    
    <div class="example-annotation">
      <p style="color: #718096; margin-bottom: 8px;">Before annotation:</p>
      <p style="font-size: 28px; font-weight: 600;">hello</p>
      
      <p style="color: #718096; margin: 20px 0 8px;">After annotation:</p>
      <ruby style="font-size: 28px; font-weight: 600;">
        hello
        <rt style="font-size: 14px; color: #667eea;">
          /h…ôÀàlo ä/ ‰Ω†Â•Ω <span style="cursor: pointer;">üîä</span>
        </rt>
      </ruby>
      
      <p style="color: #718096; margin-top: 16px; font-size: 14px;">
        <span class="emoji">üëÜ</span> Click the üîä button to play pronunciation
      </p>
    </div>

    <!-- Test Instructions -->
    <h2>üß™ How to Test</h2>

    <div class="instructions">
      <ol>
        <li>
          <strong>Enable Settings</strong><br>
          Open extension options and ensure these are enabled:
          <div class="info-card" style="margin-top: 8px;">
            <code>‚òë Enable Audio</code><br>
            <code>‚òë Show Phonetics</code><br>
            <code>‚òë Enable Phonetic Fallback</code>
          </div>
        </li>
        <li>
          <strong>Select Translation Provider</strong><br>
          Choose "Youdao" and enter your API credentials
        </li>
        <li>
          <strong>Select Test Words</strong><br>
          Double-click or drag to select any word from the test words below
        </li>
        <li>
          <strong>Click Annotation Button</strong><br>
          Click the "A" button in the floating menu
        </li>
        <li>
          <strong>Click Speaker Button</strong><br>
          Click the üîä button in the annotation to hear pronunciation
        </li>
      </ol>
    </div>

    <!-- Test Words -->
    <h2>üî§ Test Words</h2>

    <div class="test-section">
      <h3>Basic Words (FreeDictionary has audio)</h3>
      <div class="test-words">
        <span class="test-word">hello</span>
        <span class="test-word">world</span>
        <span class="test-word">apple</span>
        <span class="test-word">computer</span>
        <span class="test-word">beautiful</span>
        <span class="test-word">amazing</span>
        <span class="test-word">wonderful</span>
        <span class="test-word">important</span>
      </div>
    </div>

    <div class="test-section">
      <h3>Common Verbs</h3>
      <div class="test-words">
        <span class="test-word">learn</span>
        <span class="test-word">study</span>
        <span class="test-word">write</span>
        <span class="test-word">read</span>
        <span class="test-word">speak</span>
        <span class="test-word">listen</span>
        <span class="test-word">understand</span>
        <span class="test-word">practice</span>
      </div>
    </div>

    <div class="test-section">
      <h3>Adjectives</h3>
      <div class="test-words">
        <span class="test-word">happy</span>
        <span class="test-word">excellent</span>
        <span class="test-word">brilliant</span>
        <span class="test-word">fantastic</span>
        <span class="test-word">incredible</span>
        <span class="test-word">magnificent</span>
      </div>
    </div>

    <!-- Test in Sentences -->
    <h2>üìù Test in Sentences</h2>

    <div class="sentence-examples">
      <p>Select individual words in these sentences:</p>
      
      <p>
        The <span class="highlight">quick</span> brown fox jumps over the lazy dog.
      </p>
      
      <p>
        Learning a new <span class="highlight">language</span> requires patience and practice.
      </p>
      
      <p>
        Technology has <span class="highlight">transformed</span> the way we communicate.
      </p>
      
      <p>
        The <span class="highlight">beautiful</span> sunset painted the sky with vibrant colors.
      </p>
    </div>

    <!-- What to Expect -->
    <h2>‚úÖ What to Expect</h2>

    <table>
      <thead>
        <tr>
          <th>Audio Source</th>
          <th>Quality</th>
          <th>When Used</th>
          <th>Console Log</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>FreeDictionary</strong></td>
          <td><span class="success">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span></td>
          <td>Common English words</td>
          <td><code>Playing from URL: https://api.dictionaryapi.dev/...</code></td>
        </tr>
        <tr>
          <td><strong>Web Speech API</strong></td>
          <td><span class="warning">‚≠ê‚≠ê‚≠ê</span></td>
          <td>When FreeDictionary unavailable</td>
          <td><code>Using Web Speech API for: [word]</code></td>
        </tr>
      </tbody>
    </table>

    <!-- Visual Feedback -->
    <h2>üé® Visual Feedback</h2>

    <div class="info-card">
      <p><strong>Button States:</strong></p>
      <ul style="margin-left: 20px; color: #2c5282;">
        <li><strong>Default:</strong> üîä (semi-transparent, scales on hover)</li>
        <li><strong>Playing:</strong> üîä (pulsing animation)</li>
        <li><strong>Error:</strong> ‚ùå (shows for 1 second, then reverts)</li>
      </ul>
    </div>

    <!-- Console Logs -->
    <h2>üîç Console Logs</h2>

    <div class="feature-box">
      <h3>Open Developer Console (F12) to see:</h3>
      <pre style="background: #2d3748; color: #48bb78; padding: 16px; border-radius: 6px; overflow-x: auto; font-size: 13px; line-height: 1.6;">
<span style="color: #a0aec0;">[Annotate-Translate]</span> Playing audio for: hello
<span style="color: #a0aec0;">[Annotate-Translate]</span> Playing from URL: https://api.dictionaryapi.dev/media/pronunciations/en/hello-us.mp3
<span style="color: #a0aec0;">[Annotate-Translate]</span> Audio playback completed
      </pre>
    </div>

    <!-- Troubleshooting -->
    <h2>üêõ Troubleshooting</h2>

    <h3 class="warning">‚ö†Ô∏è Can't see the speaker button?</h3>
    <div class="info-card">
      <p><strong>Check these settings:</strong></p>
      <ol style="margin-left: 20px; color: #2c5282;">
        <li>Extension options ‚Üí <code>Enable Audio</code> is checked ‚úì</li>
        <li>The word has phonetic data (check console logs)</li>
        <li>Try enabling <code>Enable Phonetic Fallback</code></li>
      </ol>
    </div>

    <h3 class="warning">‚ö†Ô∏è Button doesn't play sound?</h3>
    <div class="info-card">
      <p><strong>Possible causes:</strong></p>
      <ol style="margin-left: 20px; color: #2c5282;">
        <li>Network connection issue (check console for errors)</li>
        <li>Browser audio permissions blocked</li>
        <li>FreeDictionary API down (should fallback to TTS automatically)</li>
      </ol>
    </div>

    <!-- Advanced Testing -->
    <h2>üöÄ Advanced Testing</h2>

    <div class="test-section">
      <h3>Test Different Scenarios:</h3>
      
      <p><strong>1. Disconnect Network</strong></p>
      <ul style="margin-left: 20px;">
        <li>Annotate a word while offline</li>
        <li>Should automatically use Web Speech API</li>
        <li>Check console for fallback message</li>
      </ul>

      <p><strong>2. Rapid Clicks</strong></p>
      <ul style="margin-left: 20px;">
        <li>Click speaker button multiple times quickly</li>
        <li>Previous audio should stop, new one starts</li>
        <li>No errors should appear</li>
      </ul>

      <p><strong>3. Different Providers</strong></p>
      <ul style="margin-left: 20px;">
        <li>Switch to Google Translate provider</li>
        <li>Should still work with Web Speech API</li>
        <li>FreeDictionary fallback won't be available</li>
      </ul>
    </div>

    <!-- Success Criteria -->
    <h2>üéØ Success Criteria</h2>

    <div class="feature-box">
      <h3 class="success">‚úì Test Passes If:</h3>
      <ol style="color: #2d3748; margin-left: 20px;">
        <li>Speaker button üîä appears after annotation</li>
        <li>Clicking button plays audio (either API or TTS)</li>
        <li>Button shows pulsing animation while playing</li>
        <li>Console shows appropriate log messages</li>
        <li>No JavaScript errors in console</li>
        <li>Audio stops cleanly when finished</li>
        <li>Button returns to normal state after playback</li>
      </ol>
    </div>

    <footer>
      <p><strong>Annotate & Translate Extension</strong> | Audio Feature Test Page</p>
      <p>Open DevTools (F12) to see detailed console logs during testing</p>
      <p style="margin-top: 12px;">
        üìö <a href="AUDIO_FEATURE.md" style="color: #667eea; text-decoration: none;">View Documentation</a> | 
        üêõ <a href="https://github.com/zkywalker/annotate-translate/issues" style="color: #667eea; text-decoration: none;">Report Issues</a>
      </p>
    </footer>
  </div>
</body>
</html>

