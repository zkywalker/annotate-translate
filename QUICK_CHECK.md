# âœ… å¿«é€Ÿæ£€æŸ¥æ¸…å•

åœ¨æµ‹è¯•æ‰©å±•ä¹‹å‰ï¼Œå¿«é€Ÿæ£€æŸ¥æ‰€æœ‰å¿…è¦çš„æ–‡ä»¶å’Œé…ç½®ã€‚

---

## ğŸ“ æ–‡ä»¶æ£€æŸ¥

### æ ¸å¿ƒæ–‡ä»¶ï¼ˆå¿…é¡»å­˜åœ¨ï¼‰

```bash
# è¿è¡Œè¿™ä¸ªå‘½ä»¤æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶
ls -la translation-service.js translation-ui.js translation-ui.css content.js content.css manifest.json options.html options.js
```

**å¿…éœ€æ–‡ä»¶æ¸…å•**ï¼š
- âœ… `translation-service.js` - ç¿»è¯‘æœåŠ¡æ ¸å¿ƒ
- âœ… `translation-ui.js` - UIæ¸²æŸ“å™¨  
- âœ… `translation-ui.css` - UIæ ·å¼
- âœ… `content.js` - å†…å®¹è„šæœ¬ï¼ˆå·²æ›´æ–°ï¼‰
- âœ… `content.css` - å†…å®¹æ ·å¼ï¼ˆå·²æ›´æ–°ï¼‰
- âœ… `manifest.json` - æ‰©å±•é…ç½®ï¼ˆå·²æ›´æ–°ï¼‰
- âœ… `options.html` - è®¾ç½®é¡µé¢
- âœ… `options.js` - è®¾ç½®é€»è¾‘
- âœ… `popup.html` - å¼¹å‡ºçª—å£
- âœ… `popup.js` - å¼¹å‡ºé€»è¾‘
- âœ… `background.js` - åå°è„šæœ¬

---

## ğŸ” é…ç½®æ£€æŸ¥

### 1. manifest.json

ç¡®è®¤content_scriptsé…ç½®æ­£ç¡®ï¼š

```json
"content_scripts": [
  {
    "matches": ["<all_urls>"],
    "js": [
      "translation-service.js",  // â† å¿…é¡»åœ¨æœ€å‰é¢
      "translation-ui.js",       // â† ç¬¬äºŒä¸ª
      "content.js"               // â† æœ€å
    ],
    "css": [
      "translation-ui.css",      // â† UIæ ·å¼
      "content.css"              // â† å†…å®¹æ ·å¼
    ]
  }
]
```

**æ£€æŸ¥å‘½ä»¤**ï¼š
```bash
grep -A 10 "content_scripts" manifest.json
```

### 2. translation-service.js

ç¡®è®¤é»˜è®¤æä¾›å•†æ˜¯debugï¼š

```javascript
// æ–‡ä»¶æœ«å°¾åº”è¯¥æœ‰ï¼š
translationService.setActiveProvider('debug');
```

**æ£€æŸ¥å‘½ä»¤**ï¼š
```bash
tail -5 translation-service.js | grep "setActiveProvider"
```

### 3. content.js

ç¡®è®¤initå‡½æ•°åŒ…å«ç¿»è¯‘æœåŠ¡æ£€æŸ¥ï¼š

```javascript
function init() {
  // åº”è¯¥åŒ…å«è¿™äº›æ£€æŸ¥
  if (typeof translationService === 'undefined') { ... }
  if (typeof TranslationUI === 'undefined') { ... }
}
```

**æ£€æŸ¥å‘½ä»¤**ï¼š
```bash
grep -A 5 "function init()" content.js | grep "translationService"
```

---

## ğŸš€ å®‰è£…æ­¥éª¤

### æ­¥éª¤1: æ‰“å¼€Chromeæ‰©å±•é¡µé¢
```
chrome://extensions/
```

### æ­¥éª¤2: å¯ç”¨å¼€å‘è€…æ¨¡å¼
- å³ä¸Šè§’å¼€å…³ â†’ å¼€å¯

### æ­¥éª¤3: ç§»é™¤æ—§ç‰ˆæœ¬ï¼ˆå¦‚æœæœ‰ï¼‰
- æ‰¾åˆ°"Annotate Translate"
- ç‚¹å‡»"ç§»é™¤"

### æ­¥éª¤4: åŠ è½½æ–°ç‰ˆæœ¬
- ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
- é€‰æ‹©é¡¹ç›®æ–‡ä»¶å¤¹
- ç¡®è®¤æ‰©å±•å·²åŠ è½½

### æ­¥éª¤5: æ£€æŸ¥æ‰©å±•çŠ¶æ€
- âœ… æ‰©å±•å›¾æ ‡æ˜¾ç¤º
- âœ… æ²¡æœ‰é”™è¯¯æç¤º
- âœ… çŠ¶æ€æ˜¾ç¤º"å·²å¯ç”¨"

---

## âš™ï¸ è®¾ç½®é…ç½®

### æ­¥éª¤1: æ‰“å¼€è®¾ç½®é¡µé¢
- å³é”®æ‰©å±•å›¾æ ‡ â†’ "é€‰é¡¹"

### æ­¥éª¤2: é…ç½®ç¿»è¯‘è®¾ç½®

**åŠŸèƒ½å¼€å…³**:
- âœ… Enable Translation (å‹¾é€‰)
- âœ… Enable Annotation (å¯é€‰)

**ç¿»è¯‘æä¾›å•†**:
- âœ… é€‰æ‹© "ğŸ› Debug"

**è¯­è¨€è®¾ç½®**:
- Source Language: Auto Detect
- Target Language: Chinese (Simplified)

**UIè®¾ç½®**:
- âœ… Enable Audio (å‹¾é€‰)
- âœ… Show Phonetics (å‹¾é€‰)
- âœ… Show Definitions (å‹¾é€‰)
- âœ… Show Examples (å‹¾é€‰)
- Max Examples: 3

**æ€§èƒ½è®¾ç½®**:
- âœ… Enable Cache (å‹¾é€‰)
- Cache Size: 100

### æ­¥éª¤3: ä¿å­˜è®¾ç½®
- ç‚¹å‡» "ğŸ’¾ Save Settings"
- ç¡®è®¤æ˜¾ç¤º"Settings saved successfully!"

---

## ğŸ§ª å¿«é€Ÿæµ‹è¯•

### æµ‹è¯•1: åŸºç¡€åŠŸèƒ½ï¼ˆ30ç§’ï¼‰

1. **æ‰“å¼€æµ‹è¯•é¡µé¢**
   ```bash
   # åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€
   file:///path/to/annotate-translate/test-extension.html
   ```

2. **æµ‹è¯•"hello"**
   - é€‰ä¸­é¡µé¢ä¸Šçš„"hello"
   - ç­‰å¾…"T"æŒ‰é’®å‡ºç°
   - ç‚¹å‡»"T"æŒ‰é’®
   - ç­‰å¾…åŠ è½½ï¼ˆ~500msï¼‰

3. **æœŸæœ›ç»“æœ**ï¼š
   ```
   âœ… çœ‹åˆ°ç¿»è¯‘å¡ç‰‡
   âœ… æ˜¾ç¤ºï¼šä½ å¥½
   âœ… æ˜¾ç¤ºï¼šUS /hÉ™ËˆloÊŠ/, UK /hÉ™ËˆlÉ™ÊŠ/
   âœ… æ˜¾ç¤ºï¼š3ä¸ªå®šä¹‰ï¼ˆint./n./v.ï¼‰
   âœ… æ˜¾ç¤ºï¼š3ä¸ªä¾‹å¥
   âœ… æ˜¾ç¤ºï¼šğŸ”Š éŸ³é¢‘æŒ‰é’®
   âœ… æ˜¾ç¤ºï¼šÃ— å…³é—­æŒ‰é’®
   ```

### æµ‹è¯•2: æ§åˆ¶å°æ£€æŸ¥ï¼ˆ10ç§’ï¼‰

1. **æ‰“å¼€å¼€å‘è€…å·¥å…·** (F12)
2. **åˆ‡æ¢åˆ°Consoleæ ‡ç­¾**
3. **æŸ¥çœ‹æ—¥å¿—**ï¼š

æœŸæœ›çœ‹åˆ°ï¼š
```
[Annotate-Translate] Content script loaded on: ...
[Annotate-Translate] Settings loaded: {...}
[Annotate-Translate] Translation service available: TranslationService {...}
[Annotate-Translate] TranslationUI initialized
[Annotate-Translate] Provider set to: debug
```

**å¦‚æœçœ‹åˆ°é”™è¯¯**ï¼š
- âŒ "Translation service not loaded!" â†’ æ£€æŸ¥manifest.json
- âŒ "TranslationUI not loaded!" â†’ æ£€æŸ¥æ–‡ä»¶é¡ºåº
- âŒ å…¶ä»–é”™è¯¯ â†’ æŸ¥çœ‹å®Œæ•´é”™è¯¯æ¶ˆæ¯

### æµ‹è¯•3: åŠŸèƒ½å®Œæ•´æ€§ï¼ˆ2åˆ†é’Ÿï¼‰

| æµ‹è¯•é¡¹ | æ“ä½œ | æœŸæœ›ç»“æœ |
|--------|------|----------|
| é¢„å®šä¹‰è¯æ±‡ | ç¿»è¯‘"apple" | æ˜¾ç¤º"è‹¹æœ" |
| é¢„å®šä¹‰è¯æ±‡ | ç¿»è¯‘"world" | æ˜¾ç¤º"ä¸–ç•Œ" |
| è‡ªåŠ¨ç”Ÿæˆ | ç¿»è¯‘"computer" | æ˜¾ç¤º"[DEBUG] Translation..." |
| éŸ³é¢‘æ’­æ”¾ | ç‚¹å‡»ğŸ”Š | å¬åˆ°è¯»éŸ³æˆ–çœ‹åˆ°çŠ¶æ€å˜åŒ– |
| å…³é—­æŒ‰é’® | ç‚¹å‡»Ã— | å¡ç‰‡å…³é—­ |
| å¤–éƒ¨ç‚¹å‡» | ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹ | å¡ç‰‡å…³é—­ |
| ç¼“å­˜ | ç¿»è¯‘"hello"ä¸¤æ¬¡ | ç¬¬äºŒæ¬¡<10ms |

---

## ğŸ æ•…éšœæ’æŸ¥

### é—®é¢˜1: "T"æŒ‰é’®ä¸å‡ºç°

**å¯èƒ½åŸå› **ï¼š
- [ ] ç¿»è¯‘åŠŸèƒ½æœªå¯ç”¨
- [ ] Content scriptæœªæ³¨å…¥
- [ ] æ–‡æœ¬é€‰æ‹©é—®é¢˜

**è§£å†³æ–¹æ³•**ï¼š
```javascript
// åœ¨é¡µé¢Consoleä¸­è¿è¡Œ
console.log('Service:', typeof translationService);
console.log('UI:', typeof TranslationUI);
console.log('Settings:', settings);
```

### é—®é¢˜2: ç¿»è¯‘å¤±è´¥

**æ£€æŸ¥æ—¥å¿—**ï¼š
```javascript
// åœ¨é¡µé¢Consoleä¸­è¿è¡Œ
translationService.translate('hello', 'zh-CN')
  .then(console.log)
  .catch(console.error);
```

**å¸¸è§é”™è¯¯**ï¼š
- "Translation service not available" â†’ æ–‡ä»¶æœªåŠ è½½
- "Provider not found" â†’ æä¾›å•†è®¾ç½®é”™è¯¯
- "Translation failed" â†’ æŸ¥çœ‹å…·ä½“é”™è¯¯æ¶ˆæ¯

### é—®é¢˜3: æ ·å¼é”™è¯¯

**æ£€æŸ¥CSSåŠ è½½**ï¼š
```javascript
// åœ¨é¡µé¢Consoleä¸­è¿è¡Œ
const cssFiles = [...document.styleSheets].map(s => s.href);
console.log('Loaded CSS:', cssFiles);
```

**ç¡®è®¤åŒ…å«**ï¼š
- translation-ui.css
- content.css

### é—®é¢˜4: è®¾ç½®ä¸ç”Ÿæ•ˆ

**æ£€æŸ¥å­˜å‚¨**ï¼š
```javascript
// åœ¨é¡µé¢Consoleä¸­è¿è¡Œ
chrome.storage.sync.get(null, (data) => {
  console.log('Stored settings:', data);
});
```

**é‡æ–°åŠ è½½æ‰©å±•**ï¼š
1. chrome://extensions/
2. ç‚¹å‡»åˆ·æ–°æŒ‰é’®
3. åˆ·æ–°æµ‹è¯•é¡µé¢

---

## âœ… å®Œæˆæ£€æŸ¥è¡¨

### å®‰è£…æ£€æŸ¥
- [ ] æ‰©å±•å·²åŠ è½½åˆ°Chrome
- [ ] æ²¡æœ‰æ˜¾ç¤ºé”™è¯¯
- [ ] æ‰©å±•å›¾æ ‡å¯è§

### é…ç½®æ£€æŸ¥
- [ ] è®¾ç½®é¡µé¢å¯ä»¥æ‰“å¼€
- [ ] Debugæä¾›å•†å·²é€‰ä¸­
- [ ] è®¾ç½®å·²ä¿å­˜

### åŠŸèƒ½æ£€æŸ¥
- [ ] "T"æŒ‰é’®å‡ºç°
- [ ] ç¿»è¯‘å¡ç‰‡æ˜¾ç¤º
- [ ] è¯‘æ–‡æ­£ç¡®ï¼ˆhelloâ†’ä½ å¥½ï¼‰
- [ ] è¯»éŸ³æ˜¾ç¤º
- [ ] è¯ä¹‰æ˜¾ç¤º
- [ ] ä¾‹å¥æ˜¾ç¤º

### äº¤äº’æ£€æŸ¥
- [ ] éŸ³é¢‘æŒ‰é’®å¯ç‚¹å‡»
- [ ] å…³é—­æŒ‰é’®å·¥ä½œ
- [ ] å¤–éƒ¨ç‚¹å‡»å…³é—­
- [ ] ç¼“å­˜åŠŸèƒ½æ­£å¸¸

### Consoleæ£€æŸ¥
- [ ] çœ‹åˆ°åˆå§‹åŒ–æ—¥å¿—
- [ ] çœ‹åˆ°ç¿»è¯‘æ—¥å¿—
- [ ] æ²¡æœ‰é”™è¯¯æ¶ˆæ¯

---

## ğŸ“Š æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```markdown
## æµ‹è¯•ç»“æœ

**æµ‹è¯•æ—¶é—´**: YYYY-MM-DD HH:mm
**Chromeç‰ˆæœ¬**: xx.x.xxxx.xx
**æ‰©å±•ç‰ˆæœ¬**: 2.0.0

### åŸºç¡€åŠŸèƒ½
- [ ] âœ…/âŒ ç¿»è¯‘"hello" 
- [ ] âœ…/âŒ ç¿»è¯‘"apple"
- [ ] âœ…/âŒ ç¿»è¯‘"world"
- [ ] âœ…/âŒ éŸ³é¢‘æ’­æ”¾
- [ ] âœ…/âŒ å…³é—­åŠŸèƒ½

### é«˜çº§åŠŸèƒ½
- [ ] âœ…/âŒ ç¼“å­˜åŠŸèƒ½
- [ ] âœ…/âŒ è‡ªåŠ¨ç”Ÿæˆæ•°æ®
- [ ] âœ…/âŒ é•¿æ–‡æœ¬ç®€åŒ–UI
- [ ] âœ…/âŒ è®¾ç½®åŒæ­¥

### é—®é¢˜è®°å½•
- é—®é¢˜1: [æè¿°]
- é—®é¢˜2: [æè¿°]

### æ€»ä½“è¯„ä»·
[é€šè¿‡/å¤±è´¥]
```

---

## ğŸ‰ æˆåŠŸæ ‡å¿—

å½“æ‰€æœ‰æ£€æŸ¥é¡¹éƒ½é€šè¿‡æ—¶ï¼Œä½ åº”è¯¥çœ‹åˆ°ï¼š

âœ… **å®‰è£…**: æ‰©å±•æ­£å¸¸åŠ è½½ï¼Œæ— é”™è¯¯  
âœ… **é…ç½®**: è®¾ç½®ä¿å­˜æˆåŠŸ  
âœ… **ç¿»è¯‘**: "hello"æ­£ç¡®ç¿»è¯‘ä¸º"ä½ å¥½"  
âœ… **UI**: å®Œæ•´å¡ç‰‡æ˜¾ç¤ºï¼ˆè¯‘æ–‡+è¯»éŸ³+è¯ä¹‰+ä¾‹å¥ï¼‰  
âœ… **éŸ³é¢‘**: ğŸ”ŠæŒ‰é’®å¯ç‚¹å‡»  
âœ… **äº¤äº’**: å…³é—­åŠŸèƒ½æ­£å¸¸  
âœ… **ç¼“å­˜**: ç¬¬äºŒæ¬¡ç¿»è¯‘<10ms  
âœ… **æ—¥å¿—**: Consoleæ— é”™è¯¯  

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [é›†æˆå®ŒæˆæŒ‡å—](INTEGRATION_COMPLETE.md) - è¯¦ç»†è¯´æ˜
- [æµ‹è¯•æ¸…å•](TEST_CHECKLIST.md) - å®Œæ•´æµ‹è¯•
- [æ•…éšœæ’æŸ¥](DEBUG_GUIDE.md) - è°ƒè¯•æŠ€å·§

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿå¼€å§‹æµ‹è¯•å§ï¼** ğŸš€

**æ¨èé¡ºåº**ï¼š
1. è¿è¡Œæ–‡ä»¶æ£€æŸ¥å‘½ä»¤
2. é‡æ–°åŠ è½½æ‰©å±•
3. é…ç½®è®¾ç½®
4. æ‰“å¼€test-extension.html
5. æµ‹è¯•"hello"
6. æ£€æŸ¥Console
7. å®Œæˆå®Œæ•´æµ‹è¯•
